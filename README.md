# Java版本简单数据库
原文C语言版：[Let’s Build a Simple Database](https://cstack.github.io/db_tutorial/)

## 1. 建立交互式Shell
第一讲主要是如何建立一个交互式的Shell（类似于Windows命令行窗口）

整个程序流程和代码都很简单：

- 整个程序为一个死循环

- 首先打印提示字符串**db >**
- 阻塞直到用户输入命令
  - 输入的是**.exit**则退出整个程序
  - 否则输出无法识别命令

## 2. 世界上最简单的SQL编译器和虚拟机

第二讲主要是区分了用户输入的字符串为两类（SQL编译器）：

- 元命令（用于操作虚拟机；如**.exit**）
- SQL语句（用于数据的CRUD；如**select**）

执行元命令和SQL语句（虚拟机）：

- **doMetaCommand**执行元命令
- **executeStatement**执行SQL语句

## 3. 在内存中只能追加数据的单表数据库

第三讲主要是实现了插入以及查询（而不是简单的输出）以及单表数据库

- 支持两种操作：插入一行和输出所有行
- 存放在内存中
- 支持单一硬编码的表

对象序列化与反序列化：

- 序列化：Row转换为byte[]
- 反序列化：byte[]转换为Row

> 保证数据固定字节是为了方便存取

```
Row{id=1, userName='abc', email='bcd'}
// 4个字节为id,32个字节为userName,255个字节为email，总共291字节存储一行记录
[1, 0, 0, 0, 97, 98, 99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 98, 99, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Row{id=1, userName='abc', email='bcd'}
```

